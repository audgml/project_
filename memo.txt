--회원 테이블
drop sequence acc_seq;
create sequence acc_seq 
start with 1 
increment by 1 
nocache;

drop table accounts cascade constraints;
create table accounts(
	anum number primary key,
	aname varchar2(15) not null,
	type varchar2(10) not null,
	id varchar2(12) not null unique,
	pw varchar2(12) not null,
	rrn1 number not null,
	rrn2 number not null,
	email varchar2(25) not null,
	phone1 number,
	phone2 number,
	phone3 number,
	addr varchar2(200),
	joindate date default sysdate
);

insert into accounts values(acc_seq.nextval, '관리자', 'admin', 'admin', '1234', '111', '111', 'admin@gmail.com', '111', '1111', '1111', '경기도 고양시 일산동구 마두1동',default); 
insert into accounts values(acc_seq.nextval, '선생님name', 'teacher', 'teacher', '1234', '111', '111', 'teacher@gmail.com', '111', '1111', '1111', '경기도 고양시 일산동구 마두1동',default); 
insert into accounts values(acc_seq.nextval, '선생님name1', 'teacher', 'teacher1', '1234', '111', '111', 'teacher1@gmail.com', '111', '1111', '1111', '경기도 고양시 일산동구 마두1동',default); 
insert into accounts values(acc_seq.nextval, '선생님name2', 'teacher', 'teacher2', '1234', '111', '111', 'teacher2@gmail.com', '111', '1111', '1111', '경기도 고양시 일산동구 마두1동',default); 
insert into accounts values(acc_seq.nextval, '학생이름', 'student', 'student', '1234', '111', '111', 'student@gmail.com', '111', '1111', '1111', '경기도 고양시 일산동구 마두1동',default); 


--강사 테이블(변경가능있음)
drop sequence tch_seq;
create sequence tch_seq
start with 1
increment by 1
nocache;

drop table teachers cascade constraints;
create table teachers(
	tnum number not null primary key,
	tid varchar2(12) references accounts(id) on delete cascade,
	tname varchar2(15) not null,
	t_image varchar2(100),
	subject varchar2(100) not null,
	visa varchar2(10), --강사 비자코드
  	tterm date not null,--강사 계약기간
  	twageratio float not null, --강사 임금 비율
  	introduction varchar2(100) --강사소개
);

insert into teachers values(tch_seq.nextval,'teacher','선생님name',null,'빅데이터','visacode','2023-1-1',0.4,'강사 소개글 입니다');
insert into teachers values(tch_seq.nextval,'teacher1','선생님name1',null,'자바','visacode1','2023-1-1',0.5,'강사 소개글 입니다1');
insert into teachers values(tch_seq.nextval,'teacher2','선생님name2',null,'C언어','visacode2','2023-1-1',0.6,'강사 소개글 입니다2');

--과목 테이블
drop sequence sub_seq;
create sequence sub_seq
start with 1
increment by 1
nocache;

drop table subjects cascade constraints;
create table subjects(
	subnum number not null primary key,
	subname varchar2(30) not null
);

insert into subjects values(sub_seq.nextval, '빅데이터');
insert into subjects values(sub_seq.nextval, '자바');
insert into subjects values(sub_seq.nextval, 'C언어');
insert into subjects values(sub_seq.nextval, '데이터베이스');
insert into subjects values(sub_seq.nextval, '기타');

--강의 테이블
drop sequence cos_seq;
create sequence cos_seq
start with 1
increment by 1
nocache;

drop table courses cascade constraints;
create table courses(
	conum number not null primary key, --강의번호
	coname varchar2(50) not null, --강의명
	coteacher varchar2(15) not null, --강의담당선생님
	cosubject varchar2(30) not null, --강의과목
	coimage varchar(100), --강의이미지
	covideo varchar2(100) not null, --강의영상
	cocontent varchar2(50) not null, --강의소개내용
	coprice number not null, --강의가격
	coupload_date date default sysdate --강의업로드날짜
);

insert into courses(conum,coname,coteacher,cosubject,coimage,covideo,cocontent,coprice,coupload_date) values(cos_seq.nextval, 'JAVA뽀개기', 'A선생님', 'JAVA', NULL, 'video.jsp', 'JAVA강의입니다', 100000, '2022-04-06');

--주문 테이블
drop sequence ord_seq;
create sequence ord_seq 
start with 1 
increment by 1 
nocache ;

DROP TABLE orders CASCADE CONSTRAINTS;

  create table orders(
  onum number primary key,
  aid varchar2(10) references accounts(id) on delete set null,
  totprice number not null,
  orderdate date default sysdate
);


-- 강의 주문 상세 테이블(?)
drop sequence cosordd_seq;
create sequence cosordd_seq 
start with 1 
increment by 1 
nocache ;

drop table cosord_details purge ;
create table cosord_details(
  odnum number primary key,
  onum number references orders(onum) on delete cascade,
  conum number references courses(conum) on delete set null
); 


--=================================================================
--[개인작업 : 완료되면 이어서 붙여주세요]

-- 1:1 질문 게시판

drop sequence bst_seq;
create sequence bst_seq 
start with 1 
increment by 1 
nocache ;


drop table board_st CASCADE CONSTRAINTS;
create table board_st(
  num number primary key,
  stuid varchar2(15) not null,
  subject varchar2(30) not null,
  teacher varchar2(15) not null,
  title varchar2(90) not null,
  content varchar2(300) not null,
  image varchar2(100),
  st_check varchar2(5) not null,
  write_date date default sysdate
); 
--check : Befor Reply(BR), After Reply(AR)
insert into board_st values(bst_seq.nextval, 'kim', '수학', '아이유', '수능특강 수2 138pg 적분 질문', '질문 내용 입니다', null, 'AR', sysdate);
insert into board_st values(bst_seq.nextval, 'kim', '수학', '아이유', '수능특강 수2 138pg 적분 질문1', '질문 내용 입니다1', null, 'BR', sysdate);
insert into board_st values(bst_seq.nextval, 'kim', '수학', '아이유', '수능특강 수2 138pg 적분 질문2', '질문 내용 입니다2', null, 'BR', sysdate);
insert into board_st values(bst_seq.nextval, 'kim', '수학', '아이유', '수능특강 수2 138pg 적분 질문3', '질문 내용 입니다3', null, 'BR', sysdate);
insert into board_st values(bst_seq.nextval, 'kim', '수학', '아이유', '수능특강 수2 138pg 적분 질문4', '질문 내용 입니다4', null, 'BR', sysdate);

-- 1:1 질문 게시판 답변

drop sequence bstrep_seq;
create sequence bstrep_seq 
start with 1 
increment by 1 
nocache ;


drop table boardreply_st CASCADE CONSTRAINTS;
create table boardreply_st(
  num number primary key,
  pnum number references board_st(num) on delete cascade,
  teachid varchar2(15) not null, 
  content varchar2(300) not null,
  image varchar2(30),
  repdate date default sysdate
); 

insert into boardreply_st values(bstrep_seq.nextval, 1, '아이유', '선생님 답변 내용 입니다', null, sysdate);

commit;

--★★/resources/origin
--리소스 경로에 origin폴더 추가/images폴더에 이미지 넣어야함 

drop table boardt cascade constraints;

create table boardt(-- subject 마다 선택해서 검색하기/정답확인 이미지를 누르면 이벤트 발생
   num number not null primary key, -- 번호
   subject varchar2(20) references subjects(subname) on delete cascade, -- 과목 / 과목별로 조회할거임.
   examfile varchar2(100) not null, -- 문제 이미지 파일
   answer varchar2(30) not null, -- 답
   passwd varchar2(12) not null, -- 비밀번호
   quizimg varchar2(100) not null, -- 퀴즈 이미지 
   movingimg varchar2(100) not null -- 이동 이미지
);

drop sequence boardt_seq;
create sequence boardt_seq
  increment by 1
  start with 1
  minvalue 1
  maxvalue 10000
  nocache;

insert into boardt(num,subject,examfile,answer,passwd,quizimg,movingimg)
values(boardt_seq.nextval,'기타','문제10.png','12','1234','퀴즈10.png','정답확인10.png');

insert into boardt(num,subject,examfile,answer,passwd,quizimg,movingimg)
values(boardt_seq.nextval,'기타','문제9.png','사각형','1234','퀴즈9.png','정답확인9.png');

insert into boardt(num,subject,examfile,answer,passwd,quizimg,movingimg)
values(boardt_seq.nextval,'기타','문제8.png','평행선','1234','퀴즈8.png','정답확인8.png');

insert into boardt(num,subject,examfile,answer,passwd,quizimg,movingimg)
values(boardt_seq.nextval,'기타','문제7.png','화살표','1234','퀴즈7.png','정답확인7.png');

insert into boardt(num,subject,examfile,answer,passwd,quizimg,movingimg)
values(boardt_seq.nextval,'기타','문제6.png','상향식','1234','퀴즈6.png','정답확인6.png');

insert into boardt(num,subject,examfile,answer,passwd,quizimg,movingimg)
values(boardt_seq.nextval,'기타','문제5.png','깊이','1234','퀴즈5.png','정답확인5.png');

insert into boardt(num,subject,examfile,answer,passwd,quizimg,movingimg)
values(boardt_seq.nextval,'기타','문제4.png','애자일','1234','퀴즈4.png','정답확인4.png');

insert into boardt(num,subject,examfile,answer,passwd,quizimg,movingimg)
values(boardt_seq.nextval,'기타','문제3.png','SELECT','1234','퀴즈3.png','정답확인3.png');

insert into boardt(num,subject,examfile,answer,passwd,quizimg,movingimg)
values(boardt_seq.nextval,'기타','문제2.png','캡슐화','1234','퀴즈2.png','정답확인2.png');

insert into boardt(num,subject,examfile,answer,passwd,quizimg,movingimg)
values(boardt_seq.nextval,'JAVA','문제1.png','UML','1234','퀴즈1.png','정답확인1.png');

commit;
  
====


1) 관리자페이지 - 결제내역폼
=> ADShlist
=> 현재 성은 작업

2) 학생페이지 - 결제폼
 => STUOrder

3) 학생페이지 - 장바구니폼
 => 현재 준님 작업
 => STUCart

4) 학생페이지 - 구매내역조회
 => STUShlist

5) 선생님페이지 - 판매내역조회
 => TCShlist
 
 
 =====
 <%--
    <!-- stushlist.jsp 주문결제-->
    <style>
    	body{
    		margin: auto;
    	}
    	table{
    		text-align: center;
    	}
    </style>
    <center>
    <h2>결제하기</h2>
    <form action="stushlist" method="post">
    <table border="1" align="center" width="50%">
    	<tr>
    		<td colspan="3">주문정보</td>
    	</tr>
    	<tr>
    		<td>상품정보</td>
    		<td>구매가</td>
    	</tr>
    	<tr>
    		<td>html 강의 어쩌고</td>
    		<td>100,000원</td>
    	</tr>
    	<tr>
    		<td colspan="3">최종 결제금액 100,000원</td>
    	</tr>
    	<tr>
    		<td colspan="3">결제수단 선택</td>
    	</tr>
    	<tr>
    		<td>
    			<input type="radio" name="payment?" value="신용카드">신용카드
    			<input type="radio" name="payment?" value="무통장입금">무통장입금
    			<input type="radio" name="payment?" value="PAYCO">PAYCO
    			<input type="radio" name="payment?" value="카카오페이">카카오페이
    			<br>
    			<input type="radio" name="payment?" value="네이버페이">네이버페이
    			<input type="radio" name="payment?" value="휴대폰결제">휴대폰결제
    			<input type="radio" name="payment?" value="계좌이체">계좌이체
    			<input type="radio" name="payment?" value="도서상품권">도서상품권
    			<input type="radio" name="payment?" value="문화상품권">문화상품권
    		</td>
    	</tr>
    	<tr>
    		<!-- 결제수단:카드 -->
    		<td>카드종류</td>
    		<td></td>
    		<td>할부종류</td>
    		<td></td>
    	</tr>
    </table>
    <br><br>
    <input type="submit" value="결제하기">
    <input type="button" value="돌아가기" onClick="history.back()">
    </form>
    </center>
 --%>
 
