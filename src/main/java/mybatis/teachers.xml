<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="teachers.model.TEBean">
	<select id="GetTEListCount" resultType="int">
		<if test="cosubject == null">
		select count(*) from teachers
		</if>
		<if test="cosubject != null">
		select t.tname, t.t_image, t.subject, t.introduction 
		from(select tname, t_image, subject, introduction
		from teachers
		where subject = #{cosubject}) t, courses c
		where t.subject = c.cosubject
		</if>
	</select>

	<select id="GetTEList" resultType="teachers.model.TEBean">
	  	<if test="cosubject == null">
	  	select * from teachers
	 	</if>
	 	<if test="cosubject != null">
		select t.tname, t.t_image, t.subject, t.introduction 
		from(select tname, t_image, subject, introduction
		from teachers
		where subject = #{cosubject}) t, courses c
		where t.subject = c.cosubject
		</if>
  	</select>
  	
  	<select id="GetTE" resultType="teachers.model.TEBean">
  		select * from teachers where tnum=#{tnum}
  	</select>
  	
  	<insert id="InsertTE">
  		insert into teachers(tnum,tid,tname,t_image,subject,visa,tterm,twageratio,introduction)
  		values(tch_seq.nextval,#{tid},#{tname},#{t_image},#{subject},#{visa},#{tterm},#{twageratio},#{introduction})
  	</insert>

  	<update id="UpdateTE">
  		update teachers set t_image=#{t_image},subject=#{subject},visa=#{visa},tterm=#{tterm},twageratio=#{twageratio},introduction=#{introduction})
  	</update>
  	<delete id="DeleteTE">
  		delete teachers where tnum=#{tnum}
  	</delete>
  	
  	<select id="GetTeSubList" resultType="teachers.model.TEBean">
  		select c.coname, c.coteacher, c.cosubject, c.coimage, c.covideo, c.cocontent, c.coprice, c.conum, t.introduction
		from(select coname, coteacher, cosubject, coimage, covideo, cocontent, coprice, conum
		from courses
		where coteacher =#{tname}) c, teachers t
		where c.coteacher =t.tname
  	</select>
  <!-- 
   	 <select id="GetTeSubList" resultType="teachers.model.TEBean">
  		select * from teachers
		where tname=#{tname}
  	</select>
  	  -->
</mapper>

<!-- order.xml -->

<!--   		select  c.coteacher, c.cosubject , c.coprice, t.tname, t.subject, t.introduction, t.t_image
		from (select coteacher, cosubject , coprice
		from courses
		where coteacher = #{tname}) c, teachers t
 		where c.coteacher = t.tname -->

